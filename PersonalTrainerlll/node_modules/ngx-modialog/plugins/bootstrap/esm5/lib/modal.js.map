{
  "version": 3,
  "file": "modal.js",
  "sources": [
    "ng://ngx-modialog/plugins/bootstrap/projects/plugins/bootstrap/src/lib/modal.ts"
  ],
  "sourcesContent": [
    "import { combineLatest } from 'rxjs';\nimport { Injectable } from '@angular/core';\n\nimport {\n  ContainerContent,\n  Overlay,\n  DialogRef,\n  Modal as Modal_,\n  CSSBackdrop,\n  PromiseCompleter\n} from 'ngx-modialog';\n\nimport { BSModalContainer } from './modal-container.component';\n\nimport { OneButtonPresetBuilder } from './presets/one-button-preset';\nimport { TwoButtonPresetBuilder, PromptPresetBuilder } from './presets/two-button-preset';\n\n// TODO: use DI factory for this.\n// TODO: consolidate dup code\nconst isDoc: boolean = !(typeof document === 'undefined' || !document);\n\nlet animationClass: string = 'show';\n\n/**\n * Execute this method to flag that you are working with Bootstrap version 4.\n * @deprecated From version 5, ngx-modialog's bootstrap plugin is set to work with version 4 of bootstrap by default.\n */\nexport function bootstrap4Mode(): void { }\n/**\n * Execute this method to flag that you are working with Bootstrap version 3.\n */\nexport function bootstrap3Mode(): void { animationClass = 'in'; }\n\n@Injectable()\nexport class Modal extends Modal_ {\n  constructor(overlay: Overlay) {\n    super(overlay);\n  }\n\n  alert(): OneButtonPresetBuilder {\n    return new OneButtonPresetBuilder(this, <any>{isBlocking: false});\n  }\n\n  prompt(): PromptPresetBuilder {\n    return new PromptPresetBuilder(this, <any>{isBlocking: true, keyboard: null});\n  }\n\n  confirm(): TwoButtonPresetBuilder {\n    return new TwoButtonPresetBuilder(this, <any>{isBlocking: true, keyboard: null});\n  }\n\n  protected create(dialogRef: DialogRef<any>, content: ContainerContent): DialogRef<any> {\n\n    const backdropRef = this.createBackdrop(dialogRef, CSSBackdrop);\n    const containerRef = this.createContainer(dialogRef, BSModalContainer, content);\n\n    let overlay = dialogRef.overlayRef.instance;\n    let backdrop = backdropRef.instance;\n    let container = containerRef.instance;\n\n    dialogRef.inElement ? overlay.insideElement() : overlay.fullscreen();\n\n    // add body class if this is the only dialog in the stack\n    if (isDoc && !document.body.classList.contains('modal-open')) {\n      document.body.classList.add('modal-open');\n    }\n\n\n    if (dialogRef.inElement) {\n      backdrop.setStyle('position', 'absolute');\n    }\n    backdrop.addClass('modal-backdrop fade', true);\n\n    backdrop.addClass(animationClass);\n    container.addClass(animationClass);\n\n    if (containerRef.location.nativeElement) {\n      containerRef.location.nativeElement.focus();\n    }\n\n    overlay.beforeDestroy(() => {\n      const completer = new PromiseCompleter<void>();\n      backdrop.removeClass(animationClass);\n      container.removeClass(animationClass);\n\n      combineLatest.call(backdrop.myAnimationEnd$(), container.myAnimationEnd$(), (s1, s2) => [s1,s2])\n        .subscribe( sources => {\n          isDoc && this.overlay.groupStackLength(dialogRef) === 1 && document.body.classList.remove('modal-open');\n          completer.resolve();\n        });\n\n      return completer.promise;\n    });\n\n    return dialogRef;\n  }\n}\n"
  ],
  "names": [],
  "mappings": "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"
}
