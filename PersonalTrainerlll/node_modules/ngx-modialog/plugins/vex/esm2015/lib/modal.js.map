{
  "version": 3,
  "file": "modal.js",
  "sources": [
    "ng://ngx-modialog/plugins/vex/projects/plugins/vex/src/lib/modal.ts"
  ],
  "sourcesContent": [
    "import { Observable, combineLatest } from 'rxjs';\n\nimport { Injectable } from '@angular/core';\n\nimport {\n  ContainerContent,\n  Overlay,\n  DialogRef,\n  DROP_IN_TYPE,\n  Modal as Modal_,\n  CSSBackdrop,\n  CSSDialogContainer,\n  PromiseCompleter\n} from 'ngx-modialog';\n\nimport { DropInPresetBuilder } from './presets/dropin-preset';\nimport { VexCSSDialogContainer } from './vex-css-dialog-container';\n\n// TODO: use DI factory for this.\n// TODO: consolidate dup code\nconst isDoc: boolean = !(typeof document === 'undefined' || !document);\n\nlet vexV3 = false;\n/**\n * Execute this method to flag that you are working with VEX version 3.\n */\nexport function vexV3Mode(): void {\n  vexV3 = true;\n}\n\n@Injectable()\nexport class Modal extends Modal_ {\n  constructor(overlay: Overlay) {\n    super(overlay);\n  }\n\n  alert(): DropInPresetBuilder {\n    return new DropInPresetBuilder(this, DROP_IN_TYPE.alert, {isBlocking: false} as any);\n  }\n\n  prompt(): DropInPresetBuilder {\n    return new DropInPresetBuilder(this, DROP_IN_TYPE.prompt, {\n      isBlocking: true,\n      keyboard: null\n    }  as any);\n  }\n\n  confirm(): DropInPresetBuilder {\n    return new DropInPresetBuilder(this, DROP_IN_TYPE.confirm, {\n      isBlocking: true,\n      keyboard: null\n    }  as any);\n  }\n\n  protected create(dialogRef: DialogRef<any>, content: ContainerContent): DialogRef<any> {\n    if (vexV3 === true) {\n      return this.createV3(dialogRef, content);\n    }\n\n    const backdropRef = this.createBackdrop(dialogRef, CSSBackdrop);\n    const containerRef = this.createContainer(dialogRef, VexCSSDialogContainer, content);\n\n    let overlay = dialogRef.overlayRef.instance;\n    let backdrop = backdropRef.instance;\n    let container = containerRef.instance;\n\n    if (dialogRef.inElement) {\n      overlay.insideElement();\n\n      overlay.setContainerStyle('position', 'relative')\n        .setContainerStyle('height', '100%')\n        .setContainerStyle('width', '100%');\n\n      backdrop.setStyle('position', 'absolute')\n        .setStyle('display', 'block')\n        .setStyle('height', '100%')\n        .setStyle('width', '100%');\n\n      container.setStyle('position', 'relative')\n        .setStyle('display', 'block')\n        .setStyle('height', '100%')\n        .setStyle('width', '100%');\n\n    } else {\n      overlay.fullscreen();\n    }\n\n    // add body class if this is the only dialog in the stack\n    if (isDoc && !document.body.classList.contains('vex-open')) {\n      document.body.classList.add('vex-open');\n    }\n\n    backdrop.addClass('vex-overlay');\n    container.addClass(`vex vex-theme-${dialogRef.context.className}`);\n\n    container.setStyle('display', 'block');\n\n    if (containerRef.location.nativeElement) {\n      containerRef.location.nativeElement.focus();\n    }\n\n    overlay.beforeDestroy(() => {\n      backdrop.addClass('vex-closing');\n      container.addClass('vex-closing');\n      const completer = new PromiseCompleter<void>();\n\n      let animationEnd$: Observable<any> = backdrop.myAnimationEnd$();\n\n      // TODO: the child element inside the container (vex-content) is the one with animation\n      // need to also wait for it to end, but this requires a reference to to it.\n      // the container itself is its parent, won't do.\n      // animationEnd$ = combineLatest.call(animationEnd$, container.myAnimationEnd$(), (s1, s2) => [s1,s2] );\n\n      animationEnd$.subscribe( sources => {\n        isDoc && this.overlay.groupStackLength(dialogRef) === 1 && document.body.classList.remove('vex-open');\n        completer.resolve();\n      });\n\n      return completer.promise;\n    });\n\n    container.apply(overlay);\n\n    return dialogRef;\n  }\n\n  private createV3(dialogRef: DialogRef<any>, content: ContainerContent): DialogRef<any> {\n\n    const backdropRef = this.createBackdrop(dialogRef, CSSBackdrop);\n    const containerRef = this.createContainer(dialogRef, CSSDialogContainer, content);\n\n    let overlay = dialogRef.overlayRef.instance;\n    let backdrop = backdropRef.instance;\n    let container = containerRef.instance;\n\n    dialogRef.inElement ? overlay.insideElement() : overlay.fullscreen();\n\n    // add body class if this is the only dialog in the stack\n    if (isDoc && !document.body.classList.contains('vex-open')) {\n      document.body.classList.add('vex-open');\n    }\n\n    overlay.addClass(`vex vex-theme-${dialogRef.context.className}`);\n    backdrop.addClass('vex-overlay');\n    container.addClass(dialogRef.context.contentClassName);\n    container.setStyle('display', 'block');\n    if (dialogRef.inElement) {\n      overlay.setStyle('padding', '0');\n      container.setStyle('margin-top', '20px');\n    }\n\n    if (containerRef.location.nativeElement) {\n      containerRef.location.nativeElement.focus();\n    }\n\n    if (dialogRef.context.className === 'bottom-right-corner') {\n      overlay.setStyle('overflow-y', 'hidden');\n      container.setStyle('position', 'absolute');\n    }\n\n    overlay.beforeDestroy(() => {\n      overlay.addClass('vex-closing');\n      const completer = new PromiseCompleter<void>();\n\n      let animationEnd$: Observable<any> = container.myAnimationEnd$();\n      if (dialogRef.context.className !== 'bottom-right-corner') {\n        animationEnd$ = combineLatest.call(animationEnd$, backdrop.myAnimationEnd$(), (s1, s2) => [s1,s2] );\n      }\n\n      animationEnd$.subscribe( sources => {\n        isDoc && this.overlay.groupStackLength(dialogRef) === 1 && document.body.classList.remove('vex-open');\n        completer.resolve();\n      });\n\n      return completer.promise;\n    });\n\n\n    overlay.setClickBoundary(containerRef.location.nativeElement);\n\n    return dialogRef;\n  }\n}\n"
  ],
  "names": [],
  "mappings": "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"
}
